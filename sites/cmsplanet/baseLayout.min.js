function saveSelectedIds(selectedIdsField,listCheckboxes){var selectedIds=[],noSelection=!0;$(listCheckboxes).each(function(){$(this).is(":checked")&&(noSelection=!1,selectedIds.push($(this).val()),selectedIdsField.length&&selectedIdsField.val(Array.from(new Set(selectedIds)).join(",")))}),noSelection&&selectedIdsField.val("")}function initLineMultiChoiceControls(){function getRoot(el){return $(el).closest(".lineMultiChoiceControl")}var controls=$(".lineMultiChoiceControl input[type=checkbox]");(controls=controls.filter(function(i,el){return"True"!==getRoot(el).attr("isInit")})).click(function(el){var root=getRoot(el.currentTarget),selectedIds,listCheckboxes;root.attr("isInit","True"),saveSelectedIds(root.find(".selectedIds"),root.find("input[type=checkbox]"))})}window.Modernizr=function(window,document,undefined){var version="2.7.2",Modernizr={},enableClasses=!0,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem=document.createElement("input"),smile=":)",toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),ns_svg="http://www.w3.org/2000/svg",tests={},inputs={},attrs={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;)(node=document.createElement("div")).id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body?div:fakeBody).innerHTML+=style,fakeBody.appendChild(div),body||(fakeBody.style.background="",fakeBody.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(fakeBody)),ret=callback(div,rule),body?div.parentNode.removeChild(div):(fakeBody.parentNode.removeChild(fakeBody),docElement.style.overflow=docOverflow),!!ret},testMediaQuery=function(mq){var matchMedia=window.matchMedia||window.msMatchMedia,bool;return matchMedia?matchMedia(mq).matches:(injectElementWithStyles("@media "+mq+" { #"+mod+" { position: absolute; } }",function(node){bool="absolute"==(window.getComputedStyle?getComputedStyle(node,null):node.currentStyle).position}),bool)},isEventSupported=function(){var TAGNAMES={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function isEventSupported(eventName,element){element=element||document.createElement(TAGNAMES[eventName]||"div");var isSupported=(eventName="on"+eventName)in element;return isSupported||(element.setAttribute||(element=document.createElement("div")),element.setAttribute&&element.removeAttribute&&(element.setAttribute(eventName,""),isSupported=is(element[eventName],"function"),is(element[eventName],"undefined")||(element[eventName]=undefined),element.removeAttribute(eventName))),element=null,isSupported}return isEventSupported}(),_hasOwnProperty={}.hasOwnProperty,hasOwnProp;function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined)return"pfx"!=prefixed||prop}return!1}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined)return!1===elem?props[i]:is(item,"function")?item.bind(elem||obj):item}return!1}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");return is(prefixed,"string")||is(prefixed,"undefined")?testProps(props,prefixed):testDOMProps(props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" "),prefixed,elem)}function webforms(){Modernizr.input=function(props){for(var i=0,len=props.length;i<len;i++)attrs[props[i]]=!!(props[i]in inputElem);return attrs.list&&(attrs.list=!(!document.createElement("datalist")||!window.HTMLDataListElement)),attrs}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),Modernizr.inputtypes=function(props){for(var i=0,bool,inputElemType,defaultView,len=props.length;i<len;i++)inputElem.setAttribute("type",inputElemType=props[i]),(bool="text"!==inputElem.type)&&(inputElem.value=smile,inputElem.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(inputElemType)&&inputElem.style.WebkitAppearance!==undefined?(docElement.appendChild(inputElem),bool=(defaultView=document.defaultView).getComputedStyle&&"textfield"!==defaultView.getComputedStyle(inputElem,null).WebkitAppearance&&0!==inputElem.offsetHeight,docElement.removeChild(inputElem)):/^(search|tel)$/.test(inputElemType)||(bool=/^(url|email)$/.test(inputElemType)?inputElem.checkValidity&&!1===inputElem.checkValidity():inputElem.value!=smile)),inputs[props[i]]=!!bool;return inputs}("search tel url email datetime date month week time datetime-local number range color".split(" "))}for(var feature in hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)},Function.prototype.bind||(Function.prototype.bind=function bind(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),tests.flexbox=function(){return testPropsAll("flexWrap")},tests.flexboxlegacy=function(){return testPropsAll("boxDirection")},tests.canvas=function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))},tests.canvastext=function(){return!(!Modernizr.canvas||!is(document.createElement("canvas").getContext("2d").fillText,"function"))},tests.webgl=function(){return!!window.WebGLRenderingContext},tests.touch=function(){var bool;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?bool=!0:injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=9===node.offsetTop}),bool},tests.geolocation=function(){return"geolocation"in navigator},tests.postmessage=function(){return!!window.postMessage},tests.websqldatabase=function(){return!!window.openDatabase},tests.indexedDB=function(){return!!testPropsAll("indexedDB",window)},tests.hashchange=function(){return isEventSupported("hashchange",window)&&(document.documentMode===undefined||document.documentMode>7)},tests.history=function(){return!(!window.history||!history.pushState)},tests.draganddrop=function(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div},tests.websockets=function(){return"WebSocket"in window||"MozWebSocket"in window},tests.rgba=function(){return setCss("background-color:rgba(150,255,150,.5)"),contains(mStyle.backgroundColor,"rgba")},tests.hsla=function(){return setCss("background-color:hsla(120,40%,100%,.5)"),contains(mStyle.backgroundColor,"rgba")||contains(mStyle.backgroundColor,"hsla")},tests.multiplebgs=function(){return setCss("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(mStyle.background)},tests.backgroundsize=function(){return testPropsAll("backgroundSize")},tests.borderimage=function(){return testPropsAll("borderImage")},tests.borderradius=function(){return testPropsAll("borderRadius")},tests.boxshadow=function(){return testPropsAll("boxShadow")},tests.textshadow=function(){return""===document.createElement("div").style.textShadow},tests.opacity=function(){return setCssAll("opacity:.55"),/^0.55$/.test(mStyle.opacity)},tests.cssanimations=function(){return testPropsAll("animationName")},tests.csscolumns=function(){return testPropsAll("columnCount")},tests.cssgradients=function(){var str1="background-image:",str2="gradient(linear,left top,right bottom,from(#9f9),to(white));",str3="linear-gradient(left top,#9f9, white);";return setCss((str1+"-webkit- ".split(" ").join(str2+str1)+prefixes.join(str3+str1)).slice(0,-str1.length)),contains(mStyle.backgroundImage,"gradient")},tests.cssreflections=function(){return testPropsAll("boxReflect")},tests.csstransforms=function(){return!!testPropsAll("transform")},tests.csstransforms3d=function(){var ret=!!testPropsAll("perspective");return ret&&"webkitPerspective"in docElement.style&&injectElementWithStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(node,rule){ret=9===node.offsetLeft&&3===node.offsetHeight}),ret},tests.csstransitions=function(){return testPropsAll("transition")},tests.fontface=function(){var bool;return injectElementWithStyles('@font-face {font-family:"font";src:url("https://")}',function(node,rule){var style=document.getElementById("smodernizr"),sheet=style.sheet||style.styleSheet,cssText=sheet?sheet.cssRules&&sheet.cssRules[0]?sheet.cssRules[0].cssText:sheet.cssText||"":"";bool=/src/i.test(cssText)&&0===cssText.indexOf(rule.split(" ")[0])}),bool},tests.generatedcontent=function(){var bool;return injectElementWithStyles(["#",mod,"{font:0/0 a}#",mod,':after{content:"',smile,'";visibility:hidden;font:3px/1 a}'].join(""),function(node){bool=node.offsetHeight>=3}),bool},tests.video=function(){var elem=document.createElement("video"),bool=!1;try{(bool=!!elem.canPlayType)&&((bool=new Boolean(bool)).ogg=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),bool.h264=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),bool.webm=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return bool},tests.audio=function(){var elem=document.createElement("audio"),bool=!1;try{(bool=!!elem.canPlayType)&&((bool=new Boolean(bool)).ogg=elem.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),bool.mp3=elem.canPlayType("audio/mpeg;").replace(/^no$/,""),bool.wav=elem.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),bool.m4a=(elem.canPlayType("audio/x-m4a;")||elem.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return bool},tests.localstorage=function(){try{return localStorage.setItem(mod,mod),localStorage.removeItem(mod),!0}catch(e){return!1}},tests.sessionstorage=function(){try{return sessionStorage.setItem(mod,mod),sessionStorage.removeItem(mod),!0}catch(e){return!1}},tests.webworkers=function(){return!!window.Worker},tests.applicationcache=function(){return!!window.applicationCache},tests.svg=function(){return!!document.createElementNS&&!!document.createElementNS(ns_svg,"svg").createSVGRect},tests.inlinesvg=function(){var div=document.createElement("div");return div.innerHTML="<svg/>",(div.firstChild&&div.firstChild.namespaceURI)==ns_svg},tests.smil=function(){return!!document.createElementNS&&/SVGAnimate/.test(toString.call(document.createElementNS(ns_svg,"animate")))},tests.svgclippaths=function(){return!!document.createElementNS&&/SVGClipPath/.test(toString.call(document.createElementNS(ns_svg,"clipPath")))},tests)hasOwnProp(tests,feature)&&(featureName=feature.toLowerCase(),Modernizr[featureName]=tests[feature](),classes.push((Modernizr[featureName]?"":"no-")+featureName));return Modernizr.input||webforms(),Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{if(feature=feature.toLowerCase(),Modernizr[feature]!==undefined)return Modernizr;test="function"==typeof test?test():test,docElement.className+=" "+(test?"":"no-")+feature,Modernizr[feature]=test}return Modernizr},setCss(""),modElem=inputElem=null,function(window,document){var version="3.7.0",options=window.html5||{},reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,supportsHtml5Styles,expando="_html5shiv",expanID=0,expandoData={},supportsUnknownElements;function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;return p.innerHTML="x<style>"+cssText+"</style>",parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return"string"==typeof elements?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];return data||(data={},expanID++,ownerDocument[expando]=expanID,expandoData[expanID]=data),data}function createElement(nodeName,ownerDocument,data){return ownerDocument||(ownerDocument=document),supportsUnknownElements?ownerDocument.createElement(nodeName):(data||(data=getExpandoData(ownerDocument)),!(node=data.cache[nodeName]?data.cache[nodeName].cloneNode():saveClones.test(nodeName)?(data.cache[nodeName]=data.createElem(nodeName)).cloneNode():data.createElem(nodeName)).canHaveChildren||reSkip.test(nodeName)||node.tagUrn?node:data.frag.appendChild(node));var node}function createDocumentFragment(ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createDocumentFragment();for(var clone=(data=data||getExpandoData(ownerDocument)).frag.cloneNode(),i=0,elems=getElements(),l=elems.length;i<l;i++)clone.createElement(elems[i]);return clone}function shivMethods(ownerDocument,data){data.cache||(data.cache={},data.createElem=ownerDocument.createElement,data.createFrag=ownerDocument.createDocumentFragment,data.frag=data.createFrag()),ownerDocument.createElement=function(nodeName){return html5.shivMethods?createElement(nodeName,ownerDocument,data):data.createElem(nodeName)},ownerDocument.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+getElements().join().replace(/[\w\-]+/g,function(nodeName){return data.createElem(nodeName),data.frag.createElement(nodeName),'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){ownerDocument||(ownerDocument=document);var data=getExpandoData(ownerDocument);return!html5.shivCSS||supportsHtml5Styles||data.hasCSS||(data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),supportsUnknownElements||shivMethods(ownerDocument,data),ownerDocument}!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>",supportsHtml5Styles="hidden"in a,supportsUnknownElements=1==a.childNodes.length||function(){document.createElement("a");var frag=document.createDocumentFragment();return void 0===frag.cloneNode||void 0===frag.createDocumentFragment||void 0===frag.createElement}()}catch(e){supportsHtml5Styles=!0,supportsUnknownElements=!0}}();var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==options.shivCSS,supportsUnknownElements:supportsUnknownElements,shivMethods:!1!==options.shivMethods,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5,shivDocument(document)}(this,document),Modernizr._version="2.7.2",Modernizr._prefixes=prefixes,Modernizr._domPrefixes=domPrefixes,Modernizr._cssomPrefixes=cssomPrefixes,Modernizr.mq=testMediaQuery,Modernizr.hasEvent=isEventSupported,Modernizr.testProp=function(prop){return testProps([prop])},Modernizr.testAllProps=testPropsAll,Modernizr.testStyles=injectElementWithStyles,Modernizr.prefixed=function(prop,obj,elem){return obj?testPropsAll(prop,obj,elem):testPropsAll(prop,"pfx")},docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+classes.join(" "),Modernizr}(this,this.document),$(function(){var viberuCheckboxCount=0;$.widget("ui.ViberuCheckbox",{_useBooleanValues:!1,_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuCheckbox"+viberuCheckboxCount,$(element).attr("id",id)),element.addClass("checkbox-orange");var pictureLabel=$("<label></label>").addClass("vc_chechbox_picture").text(element.attr("caption")).attr("for",id);void 0!==$(element).attr("checked")&&pictureLabel.addClass("checked"),pictureLabel.insertAfter(element),void 0!==$(element).attr("boolean")&&(this._useBooleanValues=!0);var that=this;pictureLabel.click(function(){that.change()}),viberuCheckboxCount++},change:function(){$(this.element).prop("checked")?($("label.vc_chechbox_picture[for='"+$(this.element).attr("id")+"']").removeClass("checked"),this.setHiddenInput($(this.element).attr("id"),this._useBooleanValues?"False":0)):($("label.vc_chechbox_picture[for='"+$(this.element).attr("id")+"']").addClass("checked"),this.setHiddenInput($(this.element).attr("id"),this._useBooleanValues?"True":1))},setHiddenInput:function(name,value){$(this.element).siblings("[name="+name+"]").length>0&&$(this.element).siblings("[name="+name+"]").val(value)}}),$(".vc_checkbox").ViberuCheckbox()}),$(function(){var viberuRadioCount=0;$.widget("ui.ViberuRadio",{_create:function(){var element=this.element,id=$(element).attr("id");if(void 0!==$(element).attr("name")){void 0===id&&(id="ViberuRadioButton"+viberuRadioCount,$(element).attr("id",id)),element.addClass("radio-orange");var pictureLabel=$("<label></label>").addClass("vc_radio_picture").text(element.attr("caption")).attr("for",id);void 0!==$(element).attr("checked")&&pictureLabel.addClass("checked"),pictureLabel.insertAfter(element);var that=this;pictureLabel.click(function(){that.change()}),viberuRadioCount++}},change:function(){if(!$(this.element).prop("checked")){var name=$(this.element).attr("name");$(".vc_radio[name="+name+"]").each(function(){var id=$(this).attr("id");$("label.vc_radio_picture[for='"+id+"']").removeClass("checked")}),$("label.vc_radio_picture[for='"+$(this.element).attr("id")+"']").addClass("checked")}}}),$(".vc_radio").ViberuRadio()}),$(function(){$.widget("ui.ViberuMoneySum",{_create:function(){createHtmlCurrency();var element=this.element,dropdown=$("#"+$(element).attr("data-dropdown")),that=this;void 0!==dropdown&&(this.currency=$(dropdown).val(),void 0!==this.currency&&"i"===this.currency[this.currency.length-1]&&(this.currency=this.currency.substr(0,this.currency.length-1)),$(dropdown).change(function(){var currency=$(this).val();if(that.currency!=currency){"i"===currency[currency.length-1]&&(currency=currency.substr(0,currency.length-1));var currentValue=parseFloat($(that.element).val().replace(/ /g,""));if("%"===currency||"%"===that.currency){var mainSumField=$("#"+$(that.element).attr("data-percent")),otherDropdown=$("#"+$(mainSumField).attr("data-dropdown"));if(void 0!==mainSumField&&void 0!==otherDropdown){var mainSum=parseFloat($(mainSumField).val().replace(/ /g,"")),mainSumCourse=$("#"+$(otherDropdown).val().toLowerCase()+"Currency").val();if("%"===currency&&mainSum>0){var mainSumInRubles=mainSum*mainSumCourse,currentValueInRubles=currentValue*$("#"+that.currency.toLowerCase()+"Currency").val(),percentValue=Math.round(1e4*currentValueInRubles/mainSumInRubles/100);$(that.element).val(that.addPlaces(percentValue))}else if("%"===that.currency&&mainSum>0){var newCurrencyCourse=$("#"+currency.toLowerCase()+"Currency").val(),newSum2,sumInRubles2=mainSum*currentValue/100*mainSumCourse,newSumInCurrency=Math.round(sumInRubles2/newCurrencyCourse);$(that.element).val(that.addPlaces(newSumInCurrency))}}}else{var newCourse=$("#"+currency.toLowerCase()+"Currency").val(),oldCourse=$("#"+that.currency.toLowerCase()+"Currency").val();if(void 0!==newCourse&&void 0!==oldCourse){var sumInRubles=currentValue*oldCourse,sumInNewCurrency=Math.round(sumInRubles/newCourse);$(that.element).val(that.addPlaces(sumInNewCurrency))}}that.currency=currency}}),$(element).keypress(function(event){var key=event.keyCode||event.which,type,oldNum;8!==key&&9!==key&&(event.shiftKey||key<48||key>57?event.preventDefault():"%"===that.currency&&$(event.target).val()>=10&&$(event.target).val(""))}),$(element).keyup(function(event){var type;"%"!==that.currency?viberuHelper.Capacity(event.target.id):0!==$(event.target).val().indexOf(".")&&0!==$(event.target).val().indexOf(",")||$(event.target).val($(event.target).val().substring(1))}),$(element).focusout(function(event){0==$(event.target).val().length&&$(event.target).val(0)}))},addPlaces:function(sum){sum+="";for(var rgx=/(\d+)(\d{3})/;rgx.test(sum);)sum=sum.replace(rgx,"$1 $2");return sum}}),$(".vc_moneysum").ViberuMoneySum()}),$(function(){var viberuIntegerFieldsCount=0,viberuFloatFieldCount=0;$.widget("ui.ViberuIntegerSum",{_create:function(){const element=this.element;let id=$(element).attr("id");void 0===id&&(id="ViberuInteger"+viberuIntegerFieldsCount++,$(element).attr("id",id)),$(element).keyup(function(){viberuHelper.Capacity(id)}),$(element).keydown(function(event){viberuHelper.OnlyNumeric(event)})}}),$(".vc_integer").ViberuIntegerSum()}),$(function(){var viberuPercentFieldsCount=0;$.widget("ui.ViberuPercent",{_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuPercent"+viberuPercentFieldsCount++,$(element).attr("id",id)),$(element).keydown(function(event){return viberuHelper.CheckFractional(event)})}}),$(".vc_percent").ViberuPercent()}),$(function(){var viberuDatepickersCount=0,monthes=[["1","Январь"],["2","Февраль"],["3","Март"],["4","Апрель"],["5","Май"],["6","Июнь"],["7","Июль"],["8","Август"],["9","Сентябрь"],["10","Октябрь"],["11","Ноябрь"],["12","Декабрь"]];$.widget("ui.ViberuDate",{_id:"",_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuDate"+viberuDatepickersCount,$(element).attr("id",id)),this._id=id;var day="",month="",monthName="",year="";if(""!==$(element).val()){var dateValues=$(element).val().split(".");day=dateValues[0].replace(/^(0)/,""),month=dateValues[1].replace(/^(0)/,""),monthName=monthes[parseInt(month)-1][1],year=dateValues[2]}var maxYear=$(element).attr("data-max-year");void 0===maxYear&&(maxYear=(new Date).getFullYear());for(var monthSelectMarkup="<div month-select-parent='"+this._id+"' class='select_elementOwn select-field' style='width: 90px; padding-right: 3px;'><input type='hidden' value='"+month+"'><a href='#' class='ttl' onclick='select_ttl_click(this, event); return false;'>"+monthName+"</a><ul style='width: 88px; max-height: 200px; display: none;'>",i=0;i<12;i++)monthSelectMarkup+="<li class='ttl2' onclick='select_ttl2_click(this); return false;' id='"+monthes[i][0]+"'><a>"+monthes[i][1]+"</a></li>";monthSelectMarkup+="</ul></div>";for(var yearSelectMarkup="<div year-select-parent='"+this._id+"' class='select_elementOwn select-field' style='width: 65px; padding-right: 3px;'><input type='hidden' value='"+year+"'><a href='#' class='ttl' onclick='select_ttl_click(this, event); return false;'>"+year+"</a><ul style='width: 63px; max-height: 200px; display: none;'>",year=maxYear;year>=1910;year--)yearSelectMarkup+="<li class='ttl2' onclick='select_ttl2_click(this); return false;' id='"+year+"'><a>"+year+"</a></li>";yearSelectMarkup+="</ul></div>";var daySelect=this.createDaysDropDown(31,day),monthSelect=$(monthSelectMarkup),yearSelect=$(yearSelectMarkup),that=this,reinitDaysFunction=function(){var monthSelectEl=$("[month-select-parent="+that._id+"]"),yearSelectEl=$("[year-select-parent="+that._id+"]"),daySelectEl=$("[day-select-parent="+that._id+"]"),selectedMonth=monthSelectEl.find("input").val(),selectedYear=yearSelectEl.find("input").val(),selectedDay=daySelectEl.find("input").val();if(""!==selectedMonth&&""!==selectedYear){var daysInMonth=new Date(selectedYear,selectedMonth,0).getDate(),newDaysDropDown=that.createDaysDropDown(daysInMonth,selectedDay);$(daySelectEl).remove();var el=$("#"+that._id);newDaysDropDown.insertAfter(el),selectedDay=$(newDaysDropDown).find("input").val()}else selectedDay=$(daySelectEl).find("input").val();""!==selectedYear&&""!==selectedMonth&&""!==selectedDay&&that.setDate(selectedYear,selectedMonth,selectedDay)};$(monthSelect).find("input").change(reinitDaysFunction),$(yearSelect).find("input").change(reinitDaysFunction),yearSelect.insertAfter(element),monthSelect.insertAfter(element),daySelect.insertAfter(element),viberuDatepickersCount++},createDaysDropDown:function(countOfDays,selectedDay){var selected=parseInt(selectedDay),defaultValue="";selected>0&&(selected>countOfDays&&(selected=countOfDays),defaultValue=selected);for(var daySelectMarkup="<div day-select-parent='"+this._id+"' class='select_elementOwn select-field' style='width: 50px; padding-right: 3px;'><input type='hidden' value='"+defaultValue+"'><a href='#' class='ttl' onclick='select_ttl_click(this, event); return false;'>"+defaultValue+"</a><ul style='width: 48px; max-height: 200px; display: none;'>",day=1;day<=countOfDays;day++)daySelectMarkup+="<li class='ttl2' onclick='select_ttl2_click(this); return false;' id='"+day+"'><a>"+day+"</a></li>";daySelectMarkup+="</ul></div>";var daySelect=$(daySelectMarkup),that=this;return $(daySelect).find("input").change(function(){var monthSelectEl=$("[month-select-parent="+that._id+"]"),yearSelectEl=$("[year-select-parent="+that._id+"]"),daySelectEl=$("[day-select-parent="+that._id+"]"),selectedMonth=monthSelectEl.find("input").val(),selectedYear=yearSelectEl.find("input").val(),selectedDay=daySelectEl.find("input").val();that.setDate(selectedYear,selectedMonth,selectedDay)}),daySelect},setDate:function(selectedYear,selectedMonth,selectedDay){if(""!==selectedYear&&""!==selectedMonth&&""!==selectedDay){var date=new Date(selectedYear,selectedMonth-1,selectedDay),month=""+(date.getMonth()+1),day=""+date.getDate(),year=date.getFullYear();month.length<2&&(month="0"+month),day.length<2&&(day="0"+day),$(this.element).val([day,month,year].join("."))}}}),$(".vc_date").ViberuDate()}),$(function(){var ViberuDateStringCount=0;$.widget("ui.ViberuDateString",{_id:"",_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuDateString"+ViberuDateStringCount,$(element).attr("id",id)),this._id=id,$(element).mask("99.99.9999",{placeholder:"_"}).change(function(){var dateArray=$(this).val().split("."),date=new Date(parseInt(dateArray[2]),parseInt(dateArray[1])-1,parseInt(dateArray[0]));date.getDate()==dateArray[0]&&date.getMonth()==dateArray[1]-1&&date.getFullYear()==dateArray[2]||$(this).val("")}),ViberuDateStringCount++}}),$(".vc_datestring").ViberuDateString()}),$(function(){var ViberuPassportNumberCount=0;$.widget("ui.ViberuPassportNumber",{_id:"",_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuPassportNumber"+ViberuPassportNumberCount,$(element).attr("id",id)),this._id=id,$(element).mask("9999 999999",{placeholder:"_"}),ViberuPassportNumberCount++}}),$(".vc_passportnumber").ViberuPassportNumber()}),$(function(){var ViberuPassportCodeCount=0;$.widget("ui.ViberuPassportCode",{_id:"",_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuPassportCode"+ViberuPassportCodeCount,$(element).attr("id",id)),this._id=id,$(element).mask("999-999",{placeholder:"_"}),ViberuPassportCodeCount++}}),$(".vc_passportcode").ViberuPassportCode()}),$(function(){var ViberuPhoneMaskedCount=0;$.widget("ui.ViberuPhoneMasked",{_id:"",_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuPhoneMasked"+ViberuPhoneMaskedCount,$(element).attr("id",id)),this._id=id,$(element).mask("+7 (999) 999-99-99",{placeholder:"_"}),ViberuPhoneMaskedCount++}}),$(".vc_phonemasked").ViberuPhoneMasked()}),$(function(){var viberuFloatFieldsCount=0;$.widget("ui.ViberuFloat",{_create:function(){var element=this.element,id=$(element).attr("id");void 0===id&&(id="ViberuFloat"+viberuFloatFieldsCount++,$(element).attr("id",id)),$(element).keydown(function(event){return viberuHelper.CheckFractional(event)}),$(element).keyup(function(event){37!==event.keyCode&&39!==event.keyCode&&viberuHelper.Capacity(id)})}}),$(".vc_float").ViberuFloat()}),$(function(){$.widget("ui.ViberuCheckboxDropdown",{options:{cssActive:"-active",cssCounter:"vc_checkboxdropdown-counter",cssTitle:"vc_checkboxdropdown-title",cssDropdown:"vc_checkboxdropdown-dropdown",cssDropdownTitle:"vc_checkboxdropdown-dropdown-title",cssDropdownList:"vc_checkboxdropdown-dropdown-list",cssDropdownListItem:"vc_checkboxdropdown-dropdown-item",cssFieldUnion:"vc_checkboxhidden-field-union",cssSelectedIds:"vc_checkboxdropdown_selected_ids"},_create:function(){var widget=this,settings=widget.options,_self=widget.element,inputList=_self.find("input[type=checkbox]"),dropdown=widget.createDropdown(_self,inputList),dropdownTitle=widget.createDropdownTitle(dropdown,inputList),widgetTitle=widget.createWidgetTitle(_self);if(void 0!==widgetTitle)var counter=widget.createWidgetCounter(widgetTitle,inputList);var unionField=_self.find("."+this.options.cssFieldUnion),selectedIdsField=_self.find("."+this.options.cssSelectedIds);widget.setOptions(_self,dropdown),widget.changeUnionField(unionField,inputList),widget.saveSelectedIds(selectedIdsField,inputList),$("body").bind("click",function(){setTimeout(function(){$("."+settings.cssDropdown).removeClass(settings.cssActive)},200)}),inputList.on("change",function(){$(this).hasClass("select-all-items")&&($(".select-all-items").prop("checked")?$("#dmsOptionsThird").find(".vc_checkboxdropdown-dropdown-item input").prop("checked",!0):$("#dmsOptionsThird").find(".vc_checkboxdropdown-dropdown-item input").prop("checked",!1)),widget.changeDropdownTitle(dropdownTitle,inputList),widget.changeWidgetCounter(counter,inputList),widget.changeUnionField(unionField,inputList),widget.saveSelectedIds(selectedIdsField,inputList)});var markerActiveDropdown=!1;dropdownTitle.on("click",function(){return markerActiveDropdown=dropdownTitle.closest("."+settings.cssDropdown).hasClass(settings.cssActive),$("."+settings.cssDropdown).removeClass(settings.cssActive),markerActiveDropdown||dropdown.toggleClass(settings.cssActive),!1}),$(dropdownList).on("click",function(e){e.stopPropagation()})},createDropdown:function(_parent,items){var widget=this,settings=this.options,dropdown=$().add('<div class="'+settings.cssDropdown+'"></div>'),label,coverItem='<li class="'+settings.cssDropdownListItem+'"><label></label></li>';return _parent.find("."+settings.cssDropdown).remove(),_parent.append(dropdown),dropdownList=$().add('<ul class="'+settings.cssDropdownList+'"></ul>').append(items),$(items).each(function(){label=$(this).attr("data-label"),$(this).wrap(coverItem).after(label).after("<span></span>")}),dropdown.append(dropdownList),dropdown},createDropdownTitle:function(dropdown,listCheckboxes){var widget=this,settings=this.options,title=$().add('<div class="'+settings.cssDropdownTitle+'"></div>'),content=this.helper.getLabelsCheckedInputs(listCheckboxes);return dropdown.prepend(title),title.append(content),title},changeDropdownTitle:function(_parent,listCheckboxes){var widget=this,labels=this.helper.getLabelsCheckedInputs(listCheckboxes);_parent.html(labels)},createWidgetTitle:function(_parent){var widget=this,settings=this.options,withoutTitle;if("True"!==_parent.attr("without-title")){var title=$().add('<div class="'+settings.cssTitle+'"></div>'),content;return _parent.prepend(title),null!=(content=_parent.attr("data-caption"))&&""!=content||(content="&nbsp;"),title.append(content),title}},createWidgetCounter:function(_parent,listCheckboxes){var widget=this,settings=this.options,counter=$().add('<i class="'+settings.cssCounter+'"></i>');_parent.append(counter);var count=this.helper.getCountCheckedInputs(listCheckboxes);return counter.append(count),0==count&&counter.hide(),counter},changeWidgetCounter:function(_parent,listCheckboxes){if(void 0!==_parent){var widget=this,count=this.helper.getCountCheckedInputs(listCheckboxes);_parent.html(count),count>0?_parent.show():_parent.hide()}},changeUnionField:function(unionField,inputList){this.result=0;var value="",isFirstCheck="";$(inputList).each(function(_,e){"All"!==$(e).val()&&("separated_list"==unionField.attr("value-type")?$(e).prop("checked")&&(value=value+(isFirstCheck=""!=value?",":"")+$(e).val(),this.result=value):(value=parseInt($(e).val()),$(e).prop("checked")&&(this.result=this.result|value)))}.bind(this)),unionField.val(this.result),console.log(unionField.val())},setOptions:function(_parent){var widget=this,settings=this.options,width=_parent.attr("data-width");null!=width&&""!=width&&(width="%"!=width.substr(-1)?parseInt(_parent.attr("data-width"))+"px":width,_parent.css({width:width}));var height=_parent.attr("data-height");null!=height&&""!=height&&(height="%"!=height.substr(-1)?parseInt(_parent.attr("data-height"))+"px":height,_parent.find($("."+settings.cssDropdownList)).css({"max-height":height}))},saveSelectedIds:function(selectedIdsField,listCheckboxes){var widget=this,selectedIds=[],noSelection=!0;$(listCheckboxes).each(function(){$(this).is(":checked")&&(noSelection=!1,selectedIds.push($(this).val()),selectedIdsField.length&&selectedIdsField.val(Array.from(new Set(selectedIds)).join(",")))}),noSelection&&selectedIdsField.val("")},helper:{dropdownTitleDefault:"...",getLabelsCheckedInputs:function(listCheckboxes){var content="";return $(listCheckboxes).each(function(){$(this).hasClass("select-all-items")||$(this).is(":checked")&&(""!=content&&(content+=", "),content+=$(this).attr("data-label"))}),""==content?this.dropdownTitleDefault:content},getCountCheckedInputs:function(listCheckboxes){var count=0;return $(listCheckboxes).each(function(){$(this).is(":checked")&&count++}),count}}}),$(".vc_checkboxdropdown").ViberuCheckboxDropdown()}),$(function(){initLineMultiChoiceControls()});var tgbStatForGA=null;function Tgb(){var dataAttr={id:"data-id"},selectors={div:".tgb-content"};function generateProductContent(html){var constContent="%content%",template;return'<div class="ban">%content%</div>'.replace("%content%",html)}function addProductContent(prevElement,html){var uniqId=viberuHelper.NewGuid(),banner='<tr class="tgb-content" '+dataAttr.id+'="'+uniqId+'">'+html+"</tr>";return prevElement.after(banner),$(selectors.div+"["+dataAttr.id+'="'+uniqId+'"]')}function addRightContent(prevElement,html){var uniqId=viberuHelper.NewGuid(),banner="<div "+dataAttr.id+'="'+uniqId+'">'+html+'</div><div class="separation"></div>';return $(prevElement).after(banner),$("div["+dataAttr.id+'="'+uniqId+'"]').next(".separation")}function generateOnMapContent(html){var constContent="%content%",template;return'<div class="b-map__content"><span class="btn-del_map__content"></span>%content%</div>'.replace("%content%",html)}function addOnMapContent(prevElement,html){var uniqId=viberuHelper.NewGuid(),banner='<div class="tgb-content" '+dataAttr.id+'="'+uniqId+'">'+html+"</div>";return prevElement.after(banner),$(selectors.div+"["+dataAttr.id+'="'+uniqId+'"]')}this.createProductContent=function(uniqId,url){$(function(){var container=$(selectors.div+"["+dataAttr.id+'="'+uniqId+'"]');$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var html,firstContent=generateProductContent(bannersParsed[0]);container.append($(firstContent));var prevElement=container;addTgbStats(prevElement);for(var i=1;i<bannersParsed.length;i++){var content=generateProductContent(bannersParsed[i]);prevElement=addProductContent(prevElement,content),addTgbStats(content)}}else container.remove()},error:function(){container.remove()}})})},this.createRight=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var container=$("div["+dataAttr.id+'="'+uniqId+'"]');container.append($(bannersParsed[0])),container.after('<div class="separation"></div>');var prevElement=container.next(".separation");addTgbStats(container);for(var i=1;i<bannersParsed.length;i++){var content=bannersParsed[i];addTgbStats(content),prevElement=addRightContent(prevElement,content)}}}})})},this.createOnMap=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var container=$(selectors.div+"["+dataAttr.id+'="'+uniqId+'"]'),firstContent=generateOnMapContent(bannersParsed[0]);container.append(firstContent);var prevElement=container;addTgbStats(prevElement);for(var i=1;i<bannersParsed.length;i++){var content=generateOnMapContent(bannersParsed[i]);prevElement=addOnMapContent(prevElement,content),addTgbStats(content)}}}})})},this.createTiles=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0)for(var container=$("div["+dataAttr.id+'="'+uniqId+'"]'),i=0;i<bannersParsed.length;i++)addTgbStats($("<div>"+bannersParsed[i]+"</div>")),container.append($(bannersParsed[i]))}})})},this.createCarouselDots=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var container=$("div["+dataAttr.id+'="'+uniqId+'"]');container.addClass("slider-tgb-body"),container.append("<div class='slider-tgb-title'>Лучшие предложения</div>");for(var slider=$("<div class='slider-tgb' id='tgbSlider"+uniqId+"'></div>"),div=$("<div></div>"),i=0;i<bannersParsed.length;i++)addTgbStats($("<div>"+bannersParsed[i]+"</div>")),div.append($(bannersParsed[i]));slider.append(div),container.append(slider)}}})})},this.createCarouselArrows=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var container=$("div["+dataAttr.id+'="'+uniqId+'"]');container.addClass("slider-tgb-body -lined");for(var slider=$("<div class='slider-tgb' id='tgbSlider"+uniqId+"'></div>"),div=$("<div></div>"),i=0;i<bannersParsed.length;i++)addTgbStats($("<div>"+bannersParsed[i]+"</div>")),div.append($(bannersParsed[i]));slider.append(div),container.append(slider)}}})})},this.createContent=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var container=$("div["+dataAttr.id+'="'+uniqId+'"]');container.append($(bannersParsed[0])),addTgbStats(container)}}})})},this.createInsuranceRating=function(uniqId,url){$(function(){$.ajax({url:url,dataType:"html",type:"GET",success:function(banners){var bannersParsed=JSON.parse(banners);if(bannersParsed.length>0){var container=$("tr["+dataAttr.id+'="'+uniqId+'"]'),td=$('<td style="padding:0 !important;" class="ban" colspan="7"></td>');td.append($(bannersParsed[0])),container.append($(td)),addTgbStats(container)}}})})}}function addTgbStats(elm){var stats=$(elm).find(".show_stat"),bank_name=$(stats).data("bank_name"),tgb_place=$(stats).data("tgb_place"),tgb_id=$(stats).data("tgb_id"),product_category=$(stats).data("product_category"),product=$(stats).data("product_name");null===tgbStatForGA&&(tgbStatForGA={}),tgbStatForGA.TGB_SHOW||(tgbStatForGA.TGB_SHOW={}),tgbStatForGA.TGB_SHOW.bank_name||(tgbStatForGA.TGB_SHOW.bank_name={}),tgbStatForGA.TGB_SHOW.bank_name[bank_name]?tgbStatForGA.TGB_SHOW.bank_name[bank_name]+=1:tgbStatForGA.TGB_SHOW.bank_name[bank_name]=1,tgbStatForGA.TGB_SHOW.tgb_type||(tgbStatForGA.TGB_SHOW.tgb_type={}),tgbStatForGA.TGB_SHOW.tgb_type[tgb_place]?tgbStatForGA.TGB_SHOW.tgb_type[tgb_place]+=1:tgbStatForGA.TGB_SHOW.tgb_type[tgb_place]=1,tgbStatForGA.TGB_SHOW.tgb_id||(tgbStatForGA.TGB_SHOW.tgb_id={}),tgbStatForGA.TGB_SHOW.tgb_id[tgb_id]?tgbStatForGA.TGB_SHOW.tgb_id[tgb_id]+=1:tgbStatForGA.TGB_SHOW.tgb_id[tgb_id]=1,tgbStatForGA.TGB_SHOW.product_category||(tgbStatForGA.TGB_SHOW.product_category={}),tgbStatForGA.TGB_SHOW.product_category[product_category]?tgbStatForGA.TGB_SHOW.product_category[product_category]+=1:tgbStatForGA.TGB_SHOW.product_category[product_category]=1,tgbStatForGA.TGB_SHOW.product||(tgbStatForGA.TGB_SHOW.product={}),tgbStatForGA.TGB_SHOW.product[product]?tgbStatForGA.TGB_SHOW.product[product]+=1:tgbStatForGA.TGB_SHOW.product[product]=1}function addTgbProductStats(elms){$(elms).each(function(){var bank_name=$(this).data("bank_name"),product_category=$(this).data("product_category"),product_click_type=$(this).data("product_click_type"),payment_type=$(this).data("payment_type"),product=$(this).data("product");null===tgbStatForGA&&(tgbStatForGA={}),tgbStatForGA.bankproduct_show||(tgbStatForGA.bankproduct_show={}),tgbStatForGA.bankproduct_show.bank_name||(tgbStatForGA.bankproduct_show.bank_name={}),tgbStatForGA.bankproduct_show.bank_name[bank_name]?tgbStatForGA.bankproduct_show.bank_name[bank_name]+=1:tgbStatForGA.bankproduct_show.bank_name[bank_name]=1,tgbStatForGA.bankproduct_show.product_category||(tgbStatForGA.bankproduct_show.product_category={}),tgbStatForGA.bankproduct_show.product_category[product_category]?tgbStatForGA.bankproduct_show.product_category[product_category]+=1:tgbStatForGA.bankproduct_show.product_category[product_category]=1,tgbStatForGA.bankproduct_show.product_click_type||(tgbStatForGA.bankproduct_show.product_click_type={}),tgbStatForGA.bankproduct_show.product_click_type[product_click_type]?tgbStatForGA.bankproduct_show.product_click_type[product_click_type]+=1:tgbStatForGA.bankproduct_show.product_click_type[product_click_type]=1,tgbStatForGA.bankproduct_show.medium||(tgbStatForGA.bankproduct_show.medium={}),tgbStatForGA.bankproduct_show.medium[payment_type]?tgbStatForGA.bankproduct_show.medium[payment_type]+=1:tgbStatForGA.bankproduct_show.medium[payment_type]=1,tgbStatForGA.bankproduct_show.product||(tgbStatForGA.bankproduct_show.product={}),tgbStatForGA.bankproduct_show.product[product]?tgbStatForGA.bankproduct_show.product[product]+=1:tgbStatForGA.bankproduct_show.product[product]=1})}function initializeTgb(obj,func){var id=$(obj).attr("data-id"),url=$(obj).attr("data-tgb-url");void 0!==url&&void 0!==id&&func(id,url)}function showPopup(url){$.cookie("Review")&&successReviewPopup(),$.cookie("Complain")&&successComplainReviewPopup(),$.cookie("ReviewAfterAuth")&&$.cookie("AfterLogin")&&reviewPopup(url),$.cookie("SaveLog")&&SuccessSavedCalcResultPopup()}function showBaseLayoutPopups(){var userId,consumer,firstName,lastName,externalUserId,mainConsumerName,email,gender,mainExternalUserId,oldName,needInputEmail;$.cookie("EmailQuestionUserId")&&(userId=$.cookie("EmailQuestionUserId"),removeCookie("EmailQuestionUserId")),$.cookie("CurrentConsumer")&&(consumer=$.cookie("CurrentConsumer"),removeCookie("CurrentConsumer")),$.cookie("FirstName")&&(firstName=$.cookie("FirstName"),removeCookie("FirstName")),$.cookie("LastName")&&(lastName=$.cookie("LastName"),removeCookie("LastName")),$.cookie("Gender")&&(gender=$.cookie("Gender"),removeCookie("Gender")),$.cookie("UserId")&&(userId=$.cookie("UserId"),removeCookie("UserId")),$.cookie("ExternalUserId")&&(externalUserId=$.cookie("ExternalUserId"),removeCookie("ExternalUserId")),$.cookie("MainConsumerName")&&(mainConsumerName=$.cookie("MainConsumerName"),removeCookie("MainConsumerName")),$.cookie("MainExternalUserId")&&(mainExternalUserId=$.cookie("MainExternalUserId"),removeCookie("MainExternalUserId")),$.cookie("Email")&&(email=$.cookie("Email"),removeCookie("Email")),$.cookie("OldName")&&(oldName=$.cookie("OldName"),removeCookie("OldName")),$.cookie("NeedInputEmail")&&(needInputEmail=$.cookie("NeedInputEmail"),removeCookie("NeedInputEmail")),needInputEmail&&$(function(){var url=window.location.href.substring(0,window.location.href.indexOf("emailQuestionUserId")-1);""===url&&(url=document.location.href);var query="?userId="+userId+"&redirectUrl="+url+"&consumerName="+consumer+"&externalUserId="+externalUserId;firstName&&(query+="&firstName="+firstName),lastName&&(query+="&lastName="+lastName),gender&&(query+="&gender="+gender),$(document).ready(fShowPopup(getChildAction("account","emailpopup")+query,400))}),$.cookie("confirm")&&(remindConfirmationPopup(),removeCookie("confirm")),$.cookie("ViewYourEmail")&&(viewYourEmailPopup(),removeCookie("ViewYourEmail")),$.cookie("JoinUsers")&&(joinUsersPopup(firstName,lastName,consumer,userId,externalUserId,mainConsumerName,mainExternalUserId,email,oldName),removeCookie("JoinUsers")),$.cookie("JoinUsersSecondVar")&&(joinUsersSecondVarPopup(firstName,lastName,consumer,userId,externalUserId,email),removeCookie("JoinUsersSecondVar")),$.cookie("SuccessMergeAccountsMessage")&&successMergeAccountsMessage()}function successReviewPopup(){fShowPopup("/childactions/generated/home/successreviewpopup",500),removeCookie("Review")}function successComplainReviewPopup(){fShowPopup("/childactions/generated/home/successcomplainpopup",500),removeCookie("Complain")}function reviewPopup(url){fShowPopup(url,730),removeCookie("AfterLogin"),removeCookie("ReviewAfterAuth")}function SuccessSavedCalcResultPopup(){fShowPopup("/childactions/generated/bankproduct/successsavedcalcresultpopup",500),removeCookie("SaveLog")}function removeCookie(cookieName){$.removeCookie(cookieName,{path:"/",domain:getMainDomain()})}function getChildAction(controller,action){return"/childactions/generated/"+controller+"/"+action}function remindConfirmationPopup(){setTimeout(function(){fShowPopup(getChildAction("Account","RemindConfirmation"),460)},500)}function viewYourEmailPopup(){setTimeout(function(){fShowPopup(getChildAction("Account","ViewYourEmail"),490)},500)}function joinUsersPopup(firstName,lastName,consumer,userId,externalUserId,mainConsumerName,mainExternalUserId,email,oldName){setTimeout(function(){fShowPopup(getChildAction("Account","JoinUsers")+"?firstName="+firstName+"&lastName="+lastName+"&consumerName="+consumer+"&userId="+userId+"&externalUserId="+externalUserId+"&mainConsumerName="+mainConsumerName+"&mainExternalUserId="+mainExternalUserId+"&email="+email+"&oldName="+oldName,540)},500)}function joinUsersSecondVarPopup(firstName,lastName,consumer,userId,externalUserId,mainConsumerName,mainExternalUserId,email,oldName){setTimeout(function(){fShowPopup(getChildAction("Account","JoinUsersSecondVar")+"?firstName="+firstName+"&lastName="+lastName+"&consumerName="+consumer+"&userId="+userId+"&externalUserId="+externalUserId+"&email="+email+"&returnUrl="+document.location.href,540)},500)}function whereAreYouPopup(regionQuestion){setTimeout(function(){fShowPopup(getChildAction("Home","WhereAreYouPopup")+"?regionAlias="+regionQuestion,460)},1e3)}function successMergeAccountsMessage(){fShowPopup(getChildAction("Account","SuccessMergeAccountsMessage"),460),removeCookie("SuccessMergeAccountsMessage")}function showRatingDescriptionPopup(rating,logoUrl,diagramColor,productName,productType,productUrl){var deposits=["вклад","вклада","вкладов"],mortgages=["ипотека","ипотеки","ипотеки"],credits=["кредит","кредита","кредитов"],autoCredits=["автокредит","автокредита","автокредитов"],productTypeNames;switch(productType){case 1:productTypeNames=deposits;break;case 2:productTypeNames=autoCredits;break;case 3:productTypeNames=mortgages;break;case 4:productTypeNames=credits}$(".popup-rate")&&$(".popup-rate").remove();var sumType=productTypeNames==deposits?"доходность":"стоимость",str='<div class="popup-rate"><span class="popup-rate-close">Close</span><h2 class="popup-rate-title">Рейтинг '+productTypeNames[1]+'</h2><span class="rate-product -l popup-rate-pos1" data-rating="'+rating+'"></span><span class="popup-rate-info"><img src="" alt="" border="0"><br><a href="'+productUrl+'">'+productName+"</a></span><p>Мы&nbsp;рассчитали рейтинг "+productTypeNames[2]+", чтобы вам было проще ориентироваться среди множества предложений банков.</p><p>Рейтинг учитывает 7&nbsp;параметров "+productTypeNames[1]+" и&nbsp;9 показателей банка, связанных с&nbsp;надежностью и&nbsp;позициями в&nbsp;различных рейтингах. Основной вес имеет "+sumType+" "+productTypeNames[1]+" и&nbsp;надежность банка, также учитываются дополнительные условия и&nbsp;опции "+productTypeNames[1]+". Обновление рейтинга происходит еженедельно.</p></div>",ratingClass=10*parseFloat(rating);html=$.parseHTML(str),$(html).find(".rate-product").addClass(diagramColor).text(rating),$(html).find(".popup-rate-info img").attr("src",logoUrl),$(html).find(".popup-rate-close").click(function(event){$(".popup-rate").remove()}),$("body").append(html)}$(function(){addTgbProductStats($(".show_stat_product"));var tgb=new Tgb;$("[data-tgb-type=ContentTgb]").each(function(){initializeTgb(this,tgb.createContent)}),$("[data-tgb-type=ProductContentTgb]").each(function(){initializeTgb(this,tgb.createProductContent)}),$("[data-tgb-type=CarouselArrowsTgb]").each(function(){initializeTgb(this,tgb.createCarouselArrows)}),$("[data-tgb-type=CarouselDotsTgb]").each(function(){initializeTgb(this,tgb.createCarouselDots)}),$("[data-tgb-type=InsuranceRatingTgb]").each(function(){initializeTgb(this,tgb.createInsuranceRating)}),$("[data-tgb-type=OnMapTgb]").each(function(){initializeTgb(this,tgb.createOnMap)}),$("[data-tgb-type=RightTgb]").each(function(){initializeTgb(this,tgb.createRight)}),$("[data-tgb-type=TilesTgb]").each(function(){initializeTgb(this,tgb.createTiles)})}),$(window).unload(function(){var data=JSON.stringify(tgbStatForGA);dataLayer.push({event:"show_stat",show_data:data})}),$(function(){$.cookie("RegionQuestion")&&(whereAreYouPopup($.cookie("RegionQuestion")),$.removeCookie("RegionQuestion",{path:"/",domain:getMainDomain()}))}),function(root,blazy){"function"==typeof define&&define.amd?define(blazy):"object"==typeof exports?module.exports=blazy():root.Blazy=blazy()}(this,function(){"use strict";var _source,_viewport,_isRetina,_supportClosest,_attrSrc="src",_attrSrcset="srcset";return function Blazy(options){if(!document.querySelectorAll){var s=document.createStyleSheet();document.querySelectorAll=function(r,c,i,j,a){for(a=document.all,c=[],i=(r=r.replace(/\[for\b/gi,"[htmlFor").split(",")).length;i--;){for(s.addRule(r[i],"k:v"),j=a.length;j--;)a[j].currentStyle.k&&c.push(a[j]);s.removeRule(0)}return c}}var scope=this,util=scope._util={};util.elements=[],util.destroyed=!0,scope.options=options||{},scope.options.error=scope.options.error||!1,scope.options.offset=scope.options.offset||100,scope.options.root=scope.options.root||document,scope.options.success=scope.options.success||!1,scope.options.selector=scope.options.selector||".b-lazy",scope.options.separator=scope.options.separator||"|",scope.options.containerClass=scope.options.container,scope.options.container=!!scope.options.containerClass&&document.querySelectorAll(scope.options.containerClass),scope.options.errorClass=scope.options.errorClass||"b-error",scope.options.breakpoints=scope.options.breakpoints||!1,scope.options.loadInvisible=scope.options.loadInvisible||!1,scope.options.successClass=scope.options.successClass||"b-loaded",scope.options.validateDelay=scope.options.validateDelay||25,scope.options.saveViewportOffsetDelay=scope.options.saveViewportOffsetDelay||50,scope.options.srcset=scope.options.srcset||"data-srcset",scope.options.src=_source=scope.options.src||"image-data",_supportClosest=Element.prototype.closest,_isRetina=window.devicePixelRatio>1,(_viewport={}).top=0-scope.options.offset,_viewport.left=0-scope.options.offset,scope.revalidate=function(){initialize(scope)},scope.load=function(elements,force){var opt=this.options;elements&&void 0===elements.length?loadElement(elements,force,opt):each(elements,function(element){loadElement(element,force,opt)})},scope.destroy=function(){var util=scope._util;scope.options.container&&each(scope.options.container,function(object){unbindEvent(object,"scroll",util.validateT)}),unbindEvent(window,"scroll",util.validateT),unbindEvent(window,"resize",util.validateT),unbindEvent(window,"resize",util.saveViewportOffsetT),util.count=0,util.elements.length=0,util.destroyed=!0},util.validateT=throttle(function(){validate(scope)},scope.options.validateDelay,scope),util.saveViewportOffsetT=throttle(function(){saveViewportOffset(scope.options.offset)},scope.options.saveViewportOffsetDelay,scope),saveViewportOffset(scope.options.offset),each(scope.options.breakpoints,function(object){if(object.width>=window.screen.width)return _source=object.src,!1}),setTimeout(function(){initialize(scope)})};function initialize(self){var util=self._util;util.elements=toArray(self.options),util.count=util.elements.length,util.destroyed&&(util.destroyed=!1,self.options.container&&each(self.options.container,function(object){bindEvent(object,"scroll",util.validateT)}),bindEvent(window,"resize",util.saveViewportOffsetT),bindEvent(window,"resize",util.validateT),bindEvent(window,"scroll",util.validateT)),validate(self)}function validate(self){for(var util=self._util,i=0;i<util.count;i++){var element=util.elements[i];(elementInView(element,self.options)||hasClass(element,self.options.successClass))&&(self.load(element),util.elements.splice(i,1),util.count--,i--)}0===util.count&&self.destroy()}function elementInView(ele,options){var rect=ele.getBoundingClientRect();if(options.container&&_supportClosest){var elementContainer=ele.closest(options.containerClass);if(elementContainer){var containerRect=elementContainer.getBoundingClientRect();if(inView(containerRect,_viewport)){var top=containerRect.top-options.offset,right=containerRect.right+options.offset,bottom=containerRect.bottom+options.offset,left=containerRect.left-options.offset,containerRectWithOffset;return inView(rect,{top:top>_viewport.top?top:_viewport.top,right:right<_viewport.right?right:_viewport.right,bottom:bottom<_viewport.bottom?bottom:_viewport.bottom,left:left>_viewport.left?left:_viewport.left})}return!1}}return inView(rect,_viewport)}function inView(rect,viewport){return rect.right>=viewport.left&&rect.bottom>=viewport.top&&rect.left<=viewport.right&&rect.top<=viewport.bottom}function FileExists(url,callback){var http=new XMLHttpRequest;http.open("HEAD",url,!1),http.onreadystatechange=function(){return 4!=http.readyState?callback(!1):http.status>=200&&http.status<=399?callback(!0):callback(!1)};try{http.send()}catch(err){}}function loadElement(ele,force,options){if(!hasClass(ele,options.successClass)&&(force||options.loadInvisible||ele.offsetWidth>0&&ele.offsetHeight>0)){var dataSrc=getAttr(ele,_source)||getAttr(ele,options.src);if(dataSrc){var dataSrcSplitted=dataSrc.split(options.separator),src=dataSrcSplitted[0];_isRetina&&dataSrcSplitted.length>1&&FileExists(dataSrcSplitted[1],function(exists){exists&&(src=dataSrcSplitted[1])});var srcset=getAttr(ele,options.srcset),isImage=equal(ele,"img"),parent=ele.parentNode,isPicture=parent&&equal(parent,"picture");if(isImage||void 0===ele.src){var img=new Image,onErrorHandler=function(){options.error&&options.error(ele,"invalid"),addClass(ele,options.errorClass),unbindEvent(img,"error",onErrorHandler),unbindEvent(img,"load",onLoadHandler)},onLoadHandler=function(){isImage?isPicture||handleSources(ele,src,srcset):ele.style.backgroundImage='url("'+src+'")',itemLoaded(ele,options),unbindEvent(img,"load",onLoadHandler),unbindEvent(img,"error",onErrorHandler)};isPicture&&(img=ele,each(parent.getElementsByTagName("source"),function(source){handleSource(source,_attrSrcset,options.srcset)})),bindEvent(img,"error",onErrorHandler),bindEvent(img,"load",onLoadHandler),handleSources(img,src,srcset)}else ele.src=src,itemLoaded(ele,options)}else equal(ele,"video")?(each(ele.getElementsByTagName("source"),function(source){handleSource(source,_attrSrc,options.src)}),ele.load(),itemLoaded(ele,options)):(options.error&&options.error(ele,"missing"),addClass(ele,options.errorClass))}}function itemLoaded(ele,options){addClass(ele,options.successClass),options.success&&options.success(ele),removeAttr(ele,options.src),removeAttr(ele,options.srcset),each(options.breakpoints,function(object){removeAttr(ele,object.src)})}function handleSource(ele,attr,dataAttr){var dataSrc=getAttr(ele,dataAttr);dataSrc&&(setAttr(ele,attr,dataSrc),removeAttr(ele,dataAttr))}function handleSources(ele,src,srcset){srcset&&setAttr(ele,_attrSrcset,srcset),ele.src=src}function setAttr(ele,attr,value){ele.setAttribute(attr,value)}function getAttr(ele,attr){return ele.getAttribute(attr)}function removeAttr(ele,attr){ele.removeAttribute(attr)}function equal(ele,str){return ele.nodeName.toLowerCase()===str}function hasClass(ele,className){return-1!==(" "+ele.className+" ").indexOf(" "+className+" ")}function addClass(ele,className){hasClass(ele,className)||(ele.className+=" "+className)}function toArray(options){for(var array=[],nodelist=options.root.querySelectorAll(options.selector),i=nodelist.length;i--;array.unshift(nodelist[i]));return array}function saveViewportOffset(offset){_viewport.bottom=(window.innerHeight||document.documentElement.clientHeight)+offset,_viewport.right=(window.innerWidth||document.documentElement.clientWidth)+offset}function bindEvent(ele,type,fn){ele.attachEvent?ele.attachEvent&&ele.attachEvent("on"+type,fn):ele.addEventListener(type,fn,{capture:!1,passive:!0})}function unbindEvent(ele,type,fn){ele.detachEvent?ele.detachEvent&&ele.detachEvent("on"+type,fn):ele.removeEventListener(type,fn,{capture:!1,passive:!0})}function each(object,fn){if(object&&fn)for(var l=object.length,i=0;i<l&&!1!==fn(object[i],i);i++);}function throttle(fn,minDelay,scope){var lastCall=0;return function(){var now=+new Date;now-lastCall<minDelay||(lastCall=now,fn.apply(scope,arguments))}}});var bLazy=new Blazy({validateDelay:100});function blazyRevalidate(timeout){void 0===timeout&&(timeout=bLazy.options.validateDelay),setTimeout(bLazy.revalidate,timeout)}$(document).ajaxComplete(function(){bLazy.revalidate()});